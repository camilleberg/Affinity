cbind(dat2010$ï..Label..Grouping.[list2010], dat2010[list2010,]$Boston.city..Massachusetts, dat2020$Boston.city..Massachusetts[list2020])
dat <- cbind(dat2010$ï..Label..Grouping.[list2010], dat2010[list2010,]$Boston.city..Massachusetts, dat2020$Boston.city..Massachusetts[list2020])
apply(dat, 2, sum)
apply(dat[2:3], 2, sum)
apply(dat[,2:3], 2, sum)
apply(dat[,2:3], 1, sum)
colSums(dat[2:3])
colSums(dat[,2:3])
View(dat)
colnames(dat) <- c("labels", "2010", "2020")
dat <- dat %>%
mutate(`2010` = as.numeric(`2010`)) %>%
mutate(`2020` = as.numeric(`2020`))
colSums(dat[,2:3])
sum(dat[`2010`])
dat[`2010`]
sum(dat$`2010`)
dat <- dat %>%
mutate(`2010` = as.numeric(`2010`)) %>%
mutate(`2020` = as.numeric(`2020`))
dat <- dat %>%
as.data.frame() %>%
mutate(`2010` = as.numeric(`2010`)) %>%
mutate(`2020` = as.numeric(`2020`))
dat <- cbind(dat2010$ï..Label..Grouping.[list2010], dat2010[list2010,]$Boston.city..Massachusetts, dat2020$Boston.city..Massachusetts[list2020])
colnames(dat) <- c("labels", "2010", "2020")
write.csv(dat, "asian_2010_2020.csv")
location_type <- "County"
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
library(tidyverse)
library(dplyr)
library(lubridate)
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- format(Sys.Date(), "%Y.%m.%d")
location_type <- "County"
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year))
mutate(as.POSIXct(as.numeric(as.character(dat$)),format="1970-01-01")
as.POSIXct(as.numeric(as.character(dat$)),format="1970-01-01")
as.POSIXct(as.numeric(as.character(dat$Date)),format="1970-01-01")
as.character(dat$Date)
as.numeric(as.character(dat$Date)
)
as.POSIXct(as.character(dat$Date),format="1970-01-01")
?as.POSIXct
as.Date(dat$Date)
as.Date.character(dat$Date)
mdy(dat$Date)
isoweek(mdy(dat$Date))
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- format(Sys.Date(), "%Y.%m.%d")
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = mdy(month, "/", day, "/", year)) %>%
select(Date, spend_all)
isoweek(mdy(dat$Date))
# looping through for week values
if(location_type == "County") {
dat <- date %>%
muatte(week = isoweek(Date))
}
return(dat)
}
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
muatte(Date = mdy(Date))
select(Date, spend_all)
isoweek(mdy(dat$Date))
# looping through for week values
if(location_type == "County") {
dat <- date %>%
muatte(week = isoweek(Date))
}
return(dat)
}
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date))
select(Date, spend_all)
isoweek(mdy(dat$Date))
# looping through for week values
if(location_type == "County") {
dat <- date %>%
muatte(week = isoweek(Date))
}
return(dat)
}
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date))
select(Date, spend_all)
isoweek(mdy(dat$Date))
# looping through for week values
if(location_type == "County") {
dat <- date %>%
mutate(week = isoweek(Date))
}
return(dat)
}
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date)) %>%
select(Date, spend_all)
isoweek(mdy(dat$Date))
# looping through for week values
if(location_type == "County") {
dat <- date %>%
mutate(week = isoweek(Date))
}
return(dat)
}
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
location_type <- "County"
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
dat %>%
mutate(Date = paste0(month, "/", day, "/", year))
dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date))
dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date)) %>%
select(Date, spend_all)
dat %>%
mutate(week = isoweek(Date))
date %>%
mutate(week = isoweek(mdy(Date)))
dat %>%
mutate(week = isoweek(mdy(Date)))
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
dat %>%
mutate(week = isoweek(mdy(Date)))
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date)) %>%
select(Date, spend_all)
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
mutate(Date = mdy(Date)) %>%
select(Date, spend_all)
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# looping through for week values
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
# removing extraneous variables and setting proper wd
rm(list = ls())
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# looping through for week values
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
View(df)
colnames(df) <- c("Week", "Day", "Suffolk", "MA", "US")
today <- format(Sys.Date(), "%Y.%m.%d")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending", today, ".csv"))
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
install.packages("readxl")
View(df)
read_affinity_tables("County")
library(tidyverse)
library(dplyr)
library(lubridate)
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- "2022.06.10"
read_affinity_tables("County")
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
# filtering for correct state an docunty
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# using lubridate to count week value number
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
read_affinity_tables("County")
check <- read_affinity_tables("County")
max(check$Date)
View(check)
check <- left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date")
# creating one DF
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
View(df)
colnames(df) <- c("Week", "Day", "Suffolk", "MA", "US")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
library(tidyverse)
library(dplyr)
library(lubridate)
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- format(Sys.Date(), "%Y.%m.%d")
today <- "2022.06.10"
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
# filtering for correct state an docunty
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# using lubridate to count week value number
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
# creating one DF
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
colnames(df) <- c("Week", "Day", "Suffolk", "MA", "US")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
check <- left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
library(tidyverse)
library(dplyr)
library(lubridate)
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- format(Sys.Date(), "%Y.%m.%d")
today <- "2022.06.10"
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
# filtering for correct state an docunty
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# using lubridate to count week value number
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
# creating one DF
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
colnames(df) <- c("Week", "Day", "Suffolk", "MA", "US")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
check <- left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date")
View(check)
library(tidyverse)
library(dplyr)
library(lubridate)
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- format(Sys.Date(), "%Y.%m.%d")
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
# filtering for correct state an docunty
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# using lubridate to count week value number
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
# creating one DF
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
colnames(df) <- c("Week", "Day", "Suffolk", "MA", "US")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
# this script is specifically for Economic Indicators - Cosnumer Spending
library(tidyverse)
library(dplyr)
library(lubridate)
# removing extraneous variables and setting proper wd
rm(list = ls())
setwd("~/GitHub/Affinity")
today <- format(Sys.Date(), "%Y.%m.%d")
read_affinity_tables <- function(location_type) {
dat <- read.csv(paste0("data/Affinity - ", paste0(location_type), " - Daily.csv"))
# filtering for correct state an docunty
if(location_type == "County") {
dat <- dat %>%
filter(countyfips == 25025)
# this is the county fips for Suffolk kCounty
} else if (location_type == "State") {
dat <- dat %>%
filter(statefips == 25)
# this is the state fips for MA
}
# clenaing out unwanted data
dat  <- dat %>%
mutate(Date = paste0(month, "/", day, "/", year)) %>%
select(Date, spend_all)
# using lubridate to count week value number
if(location_type == "County") {
dat <- dat %>%
mutate(week = isoweek(mdy(Date)))
}
return(dat)
}
# creating one DF
df <- left_join(read_affinity_tables("County"),
left_join(read_affinity_tables("State"), read_affinity_tables("National"), by = "Date"), by = "Date") %>%
select(week, Date, spend_all, spend_all.x, spend_all.y)
colnames(df) <- c("Week", "Day", "Suffolk", "MA", "US")
# writing and opening the fiel in excel
write.csv(df, paste0("output/consumer_spending_", today, ".csv"))
